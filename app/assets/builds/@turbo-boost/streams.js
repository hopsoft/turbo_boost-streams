var ie=Object.defineProperty,le=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var F=(a,o,u)=>o in a?ie(a,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[o]=u,N=(a,o)=>{for(var u in o||(o={}))oe.call(o,u)&&F(a,u,o[u]);if(D)for(var u of D(o))se.call(o,u)&&F(a,u,o[u]);return a},q=(a,o)=>le(a,ae(o));var U="0.1.9";var W=function(){"use strict";let a=new Set,o={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:A,afterNodeAdded:A,beforeNodeMorphed:A,afterNodeMorphed:A,beforeNodeRemoved:A,afterNodeRemoved:A,beforeAttributeUpdated:A},head:{style:"merge",shouldPreserve:function(e){return e.getAttribute("im-preserve")==="true"},shouldReAppend:function(e){return e.getAttribute("im-re-append")==="true"},shouldRemove:A,afterHeadMorphed:A}};function u(e,t,n={}){e instanceof Document&&(e=e.documentElement),typeof t=="string"&&(t=G(t));let r=K(t),i=J(e,r,n);return m(e,r,i)}function m(e,t,n){if(n.head.block){let r=e.querySelector("head"),i=t.querySelector("head");if(r&&i){let l=M(i,r,n);Promise.all(l).then(function(){m(e,t,Object.assign(n,{head:{block:!1,ignore:!0}}))});return}}if(n.morphStyle==="innerHTML")return b(t,e,n),e.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let r=Z(t,e,n),i=r==null?void 0:r.previousSibling,l=r==null?void 0:r.nextSibling,s=f(e,r,n);return r?Q(i,s,l):[]}else throw"Do not understand how to morph style "+n.morphStyle}function d(e,t){return t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function f(e,t,n){if(!(n.ignoreActive&&e===document.activeElement))return t==null?n.callbacks.beforeNodeRemoved(e)===!1?e:(e.remove(),n.callbacks.afterNodeRemoved(e),null):H(e,t)?(n.callbacks.beforeNodeMorphed(e,t)===!1||(e instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&n.head.style!=="morph"?M(t,e,n):(g(t,e,n),d(e,n)||b(t,e,n))),n.callbacks.afterNodeMorphed(e,t)),e):n.callbacks.beforeNodeRemoved(e)===!1||n.callbacks.beforeNodeAdded(t)===!1?e:(e.parentElement.replaceChild(t,e),n.callbacks.afterNodeAdded(t),n.callbacks.afterNodeRemoved(e),t)}function b(e,t,n){let r=e.firstChild,i=t.firstChild,l;for(;r;){if(l=r,r=l.nextSibling,i==null){if(n.callbacks.beforeNodeAdded(l)===!1)return;t.appendChild(l),n.callbacks.afterNodeAdded(l),S(n,l);continue}if(O(l,i,n)){f(i,l,n),i=i.nextSibling,S(n,l);continue}let s=X(e,t,l,i,n);if(s){i=B(i,s,n),f(s,l,n),S(n,l);continue}let p=Y(e,t,l,i,n);if(p){i=B(i,p,n),f(p,l,n),S(n,l);continue}if(n.callbacks.beforeNodeAdded(l)===!1)return;t.insertBefore(l,i),n.callbacks.afterNodeAdded(l),S(n,l)}for(;i!==null;){let s=i;i=i.nextSibling,C(s,n)}}function c(e,t,n,r){return e==="value"&&r.ignoreActiveValue&&t===document.activeElement?!0:r.callbacks.beforeAttributeUpdated(e,t,n)===!1}function g(e,t,n){let r=e.nodeType;if(r===1){let i=e.attributes,l=t.attributes;for(let s of i)c(s.name,t,"update",n)||t.getAttribute(s.name)!==s.value&&t.setAttribute(s.name,s.value);for(let s=l.length-1;0<=s;s--){let p=l[s];c(p.name,t,"remove",n)||e.hasAttribute(p.name)||t.removeAttribute(p.name)}}(r===8||r===3)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),d(t,n)||I(e,t,n)}function v(e,t,n,r){if(e[n]!==t[n]){let i=c(n,t,"update",r);i||(t[n]=e[n]),e[n]?i||t.setAttribute(n,e[n]):c(n,t,"remove",r)||t.removeAttribute(n)}}function I(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&e.type!=="file"){let r=e.value,i=t.value;v(e,t,"checked",n),v(e,t,"disabled",n),e.hasAttribute("value")?r!==i&&(c("value",t,"update",n)||(t.setAttribute("value",r),t.value=r)):c("value",t,"remove",n)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement)v(e,t,"selected",n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let r=e.value,i=t.value;if(c("value",t,"update",n))return;r!==i&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r&&(t.firstChild.nodeValue=r)}}function M(e,t,n){let r=[],i=[],l=[],s=[],p=n.head.style,y=new Map;for(let h of e.children)y.set(h.outerHTML,h);for(let h of t.children){let E=y.has(h.outerHTML),w=n.head.shouldReAppend(h),V=n.head.shouldPreserve(h);E||V?w?i.push(h):(y.delete(h.outerHTML),l.push(h)):p==="append"?w&&(i.push(h),s.push(h)):n.head.shouldRemove(h)!==!1&&i.push(h)}s.push(...y.values());let P=[];for(let h of s){let E=document.createRange().createContextualFragment(h.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(E)!==!1){if(E.href||E.src){let w=null,V=new Promise(function(re){w=re});E.addEventListener("load",function(){w()}),P.push(V)}t.appendChild(E),n.callbacks.afterNodeAdded(E),r.push(E)}}for(let h of i)n.callbacks.beforeNodeRemoved(h)!==!1&&(t.removeChild(h),n.callbacks.afterNodeRemoved(h));return n.head.afterHeadMorphed(t,{added:r,kept:l,removed:i}),P}function Ee(){}function A(){}function z(e){let t={};return Object.assign(t,o),Object.assign(t,e),t.callbacks={},Object.assign(t.callbacks,o.callbacks),Object.assign(t.callbacks,e.callbacks),t.head={},Object.assign(t.head,o.head),Object.assign(t.head,e.head),t}function J(e,t,n){return n=z(n),{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:ne(e,t),deadIds:new Set,callbacks:n.callbacks,head:n.head}}function O(e,t,n){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName?e.id!==""&&e.id===t.id?!0:T(n,e,t)>0:!1}function H(e,t){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName}function B(e,t,n){for(;e!==t;){let r=e;e=e.nextSibling,C(r,n)}return S(n,t),t.nextSibling}function X(e,t,n,r,i){let l=T(i,n,t),s=null;if(l>0){let p=r,y=0;for(;p!=null;){if(O(n,p,i))return p;if(y+=T(i,p,e),y>l)return null;p=p.nextSibling}}return s}function Y(e,t,n,r,i){let l=r,s=n.nextSibling,p=0;for(;l!=null;){if(T(i,l,e)>0)return null;if(H(n,l))return l;if(H(s,l)&&(p++,s=s.nextSibling,p>=2))return null;l=l.nextSibling}return l}function G(e){let t=new DOMParser,n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){let r=t.parseFromString(e,"text/html");if(n.match(/<\/html>/))return r.generatedByIdiomorph=!0,r;{let i=r.firstChild;return i?(i.generatedByIdiomorph=!0,i):null}}else{let i=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return i.generatedByIdiomorph=!0,i}}function K(e){if(e==null)return document.createElement("div");if(e.generatedByIdiomorph)return e;if(e instanceof Node){let t=document.createElement("div");return t.append(e),t}else{let t=document.createElement("div");for(let n of[...e])t.append(n);return t}}function Q(e,t,n){let r=[],i=[];for(;e!=null;)r.push(e),e=e.previousSibling;for(;r.length>0;){let l=r.pop();i.push(l),t.parentElement.insertBefore(l,t)}for(i.push(t);n!=null;)r.push(n),i.push(n),n=n.nextSibling;for(;r.length>0;)t.parentElement.insertBefore(r.pop(),t.nextSibling);return i}function Z(e,t,n){let r;r=e.firstChild;let i=r,l=0;for(;r;){let s=x(r,t,n);s>l&&(i=r,l=s),r=r.nextSibling}return i}function x(e,t,n){return H(e,t)?.5+T(n,e,t):0}function C(e,t){S(t,e),t.callbacks.beforeNodeRemoved(e)!==!1&&(e.remove(),t.callbacks.afterNodeRemoved(e))}function ee(e,t){return!e.deadIds.has(t)}function te(e,t,n){return(e.idMap.get(n)||a).has(t)}function S(e,t){let n=e.idMap.get(t)||a;for(let r of n)e.deadIds.add(r)}function T(e,t,n){let r=e.idMap.get(t)||a,i=0;for(let l of r)ee(e,l)&&te(e,l,n)&&++i;return i}function j(e,t){let n=e.parentElement,r=e.querySelectorAll("[id]");for(let i of r){let l=i;for(;l!==n&&l!=null;){let s=t.get(l);s==null&&(s=new Set,t.set(l,s)),s.add(i.id),l=l.parentElement}}}function ne(e,t){let n=new Map;return j(e,n),j(t,n),n}return{morph:u,defaults:o}}();var ue=/INPUT/i,fe=/date|datetime-local|email|month|number|password|range|search|tel|text|time|url|week/i,de=/TEXTAREA/i,ce=a=>a.nodeType!==Node.ELEMENT_NODE||a!==document.activeElement?!0:a.tagName.match(de)?!1:a.tagName.match(ue)&&a.getAttribute("type").match(fe),he={beforeNodeMorphed:(a,o)=>ce(a)},pe=(a,o)=>W.morph(a,o,{callbacks:he}),_=pe;var k={before:"turbo-boost:stream:before-invoke",after:"turbo-boost:stream:after-invoke",finish:"turbo-boost:stream:finish-invoke"};function R(a,o,u){let{object:m,target:d}=a;o=o||{},o=q(N({},o),{object:a.object});let f={detail:o,bubbles:!0};d.dispatchEvent(new CustomEvent(k.before,f));let{delay:b}=o.invoke||{};b=b||0;let c=()=>{let g=u(m);f.detail.result=g,d.dispatchEvent(new CustomEvent(k.after,f));let v;g instanceof Animation&&(v=g.finished),g instanceof Promise&&(v=g),v?v.then(()=>{f.detail.promise="fulfilled",d.dispatchEvent(new CustomEvent(k.finish,f))},()=>{f.detail.promise="rejected",d.dispatchEvent(new CustomEvent(k.finish,f))}):d.dispatchEvent(new CustomEvent(k.finish,f))};b>0?setTimeout(c,b):c()}function me(a,o,u){let m=o[0],d=o[1],f={method:a,eventName:m,eventOptions:d};u.forEach(b=>R(b,f,c=>c.dispatchEvent(new CustomEvent(m,d))))}function be(a,o,u){let m=o[0],d={method:a,html:m};u.forEach(f=>R(f,d,b=>_(b,m)))}function ve(a,o,u){let m=a.slice(0,-1).trim(),d=o[0],f={method:a,property:m,value:d};u.forEach(b=>R(b,f,c=>c[m]=d))}function ge(a,o,u){let m={method:a,args:o};u.forEach(d=>R(d,m,f=>f[a].apply(f,o)))}function $(a,o,u){return a.match(/^dispatch(Event)?$/)?me(a,o,u):a.match(/^morph|mutate$/)?be(a,o,u):a.endsWith("=")?ve(a,o,u):ge(a,o,u)}function L(){let a=JSON.parse(this.templateContent.textContent),{id:o,selector:u,receiver:m,method:d,args:f,delay:b}=a,c=[{object:self,target:self}];u&&(c=Array.from(document.querySelectorAll(u)).map(g=>({object:g,target:g}))),m&&(c=c.map(g=>{let{object:v,target:I}=g,M=m.split(".");for(;M.length>0;)v=v[M.shift()],v.dispatchEvent&&(I=v);return{object:v,target:I}})),b>0?setTimeout(()=>$(d,f,c),b):$(d,f,c)}if(!self.Turbo)throw new Error("`Turbo` is not defined! Be sure to import `@turbo-boost/streams` after `@hotwired/turbo` or `@hotwired/turbo-rails`.");if(!Turbo.StreamActions)throw new Error("`Turbo.StreamActions` is not defined! Verify that you are running >= `7.2.0` of `@hotwired/turbo`.");Turbo.StreamActions.invoke=L;self.TurboBoost=self.TurboBoost||{};self.TurboBoost.Streams={invoke:L,invokeEvents:k,VERSION:U};console.info("@turbo-boost/streams has initialized and registered new stream actions with Turbo.");var Ve=self.TurboBoost.Streams;export{Ve as default};
//# sourceMappingURL=streams.js.map
